<!doctype html>
<html lang="de">
<head>
    <title>Hamburg Geschichte</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../index.css">
    <style>
        #container {
            width: 100vw;
            height: 100vh;
            padding: 20px;
        }

    </style>
</head>
<body>
<noscript><strong>Please enable JavaScript to view this page correctly.</strong></noscript>
<header>

</header>
<main>


    <div id="container">
        <button style="margin: 30px;" id="tlanim">Move Timeline</button>
        <svg id="mainSvg" width="100%" height="100%" viewbox="0 0 1496 812">
            <!-- Hintergrundbereiche -->
            <rect x="0" y="0" width="1496" height="270" fill="#ADE0D1" />
            <rect x="0" y="270" width="1496" height="542" fill="#F9DB90" />

            <!-- ClipPath für die Timeline -->
            <defs>
                <clipPath id="timelineClip">
                    <rect x="0" y="0" width="1496" height="270"/>
                </clipPath>
                <clipPath id="mapClip">
                    <rect x="0" y="270" width="1496" height="542"/>
                </clipPath>
            </defs>

            <!-- Gruppe mit Timeline und Bildern (bewegbar) -->
            <g>

                <!-- Timeline-Gruppe -->
                <svg id="timelineSvg" x="0" y="0" width="1496" height="270" viewBox="0 0 1496 270">
                    <!-- Timeline wird per JavaScript eingefügt -->
                </svg>

                <!-- Bildbereich -->
                <svg id="mapSvg" x="0" y="270" width="1496" height="542" viewBox="0 0 1496 542">

                    <def>
                        <path id="start2" d="M265.621,433.305L583.194,271L726.397,21.254L886.287,242.899L1153.1,474.535L807.254,433.305L622.119,409.408L265.621,433.305Z"/>
                        <path id="target" d="M301.136,296.784L487.226,271L529.476,302.842L667.166,90.481L848.299,130.767L906.366,216.205L1090.1,271L940.809,380.942L936.633,515.569L687.312,518.372L674.817,471.662L437.036,433.305L301.136,296.784Z" style="stroke:black;stroke-width:1px;"/>
                    </def>

                    <path id="start" d="M357.088,298.528L583.194,271L726.032,112.373L886.287,242.899L1017.54,271L807.254,433.305L622.119,409.408L357.088,298.528Z"/>

                    <!--
                   -->

                    <!-- Platzhalterbilder -->
                    <!-- In deinem Projekt bitte durch tatsächliche URLs ersetzen -->
                    <!--
                    <image href="maps/1070.jpg" x="0" y="30" width="600" />
                    <image href="maps/1200.jpg" x="700" y="30" width="600" />
                    <image href="maps/1300.jpg" x="1400" y="30" width="600" />
                    <image href="maps/1400.jpg" x="2100" y="30" width="600" />
                    <image href="maps/1550.jpg" x="2800" y="30" width="600" />
                    <image href="maps/1630.jpg" x="3500" y="30" width="600" />
                    <image href="maps/1722.jpg" x="4200" y="30" width="600" />
                    <image href="maps/1830.jpg" x="4900" y="30" width="600" />
                    <image href="maps/1880.jpg" x="5600" y="30" width="600" />
                    <image href="maps/1911.jpg" x="6300" y="30" width="600" />
                    -->
                </svg>
            </g>
        </svg>


    </div>

</main>
<footer>

</footer>
<script type="module" src="../../index.js"></script>

<script>
    const svg = document.getElementById('timelineSvg');

    const startYear = 1200;
    const endYear = 2000;
    const centuryWidth = 1000;
    const decadeWidth = centuryWidth / 10;
    const startX = 200;

    const largeHeight = 90;
    const smallHeight = 70;
    const barWidth = 7;

    const colorDark = '#B69131';
    const colorLight = '#DDC37E';

    for (let year = startYear; year <= endYear; year += 10) {
        const position = startX + ((year - startYear) / 10) * decadeWidth;
        const isCentury = year % 100 === 0;
        const isHalfCentury = year % 100 === 50;

        const height = isCentury ? largeHeight : smallHeight;
        const fill = (isCentury || isHalfCentury) ? colorDark : colorLight;
        const yPos = isCentury ? 100 : 110;

        // Balken zeichnen
        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('x', position - barWidth / 2);
        rect.setAttribute('y', yPos);
        rect.setAttribute('width', barWidth);
        rect.setAttribute('height', height);
        rect.setAttribute('fill', fill);
        svg.appendChild(rect);

        // Text nur bei vollen Jahrhunderten
        if (isCentury) {
            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', position);
            text.setAttribute('y', 80);
            text.setAttribute('text-anchor', 'middle');
            text.setAttribute('fill', '#5E564B');
            text.setAttribute('font-size', '40');
            text.setAttribute('font-family', 'Montserrat Thin');
            text.textContent = year;
            svg.appendChild(text);
        }
    }
</script>

<script type="module">
    import { animate } from '../../lib/anime.esm.min.js'; // Oder passe deinen Pfad korrekt an, wenn du lokal arbeitest!

    document.querySelector('button#tlanim').addEventListener('click', () => {
        const svgTL = document.getElementById('timelineSvg');

        const animation = animate(svg, {
            // Wir benutzen KEIN freies Objekt mehr, sondern das echte SVG als Target
            // Eigenschaft: translateX oder eine eigene Animation selbst bauen
            // Wir nutzen stattdessen ein Dummy-Property über CSS-Variablen!

            // Da wir viewBox nicht direkt animieren können, brauchen wir einen Workaround
            // Wir erstellen eine CSS-Variable am SVG
            '--x': [0, 6300],
            duration: 10000,
            easing: 'linear',
            onUpdate: (anim) => {
                // Holen uns den aktuellen Wert der CSS-Variable
                const x = parseFloat(getComputedStyle(svgTL).getPropertyValue('--x'));
                svgTL.setAttribute('viewBox', `${x} 0 1496 270`);
            }
        });
    });
</script>

<script type="module">
    import { animate, svg } from '../../lib/anime.esm.min.js';


    const pathStart = document.getElementById('start');
    const pathStart2 = document.getElementById('start2');
    const pathTarget = document.getElementById('target');

    animate(pathStart, {
        d: svg.morphTo(pathTarget),
        ease: 'inOutCirc',
        duration: 1000
    });

</script>



</body>
</html>